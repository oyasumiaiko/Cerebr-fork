<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Cerebr</title>
    <script src="lib/marked.min.js"></script>
    <script src="lib/highlight.min.js"></script>
    <script src="lib/katex.min.js"></script>
    <script src="lib/auto-render.min.js"></script>
    <link rel="stylesheet" href="lib/github-dark.css">
    <link rel="stylesheet" href="lib/katex.min.css">
    <link rel="stylesheet" href="sidebar.css">
</head>
<body>
    <div id="collapse-button">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 4L7 12L15 20"/>
        </svg>
    </div>
    <div id="chat-container"></div>
    <div id="context-menu">
        <div class="context-menu-item" id="copy-message">
            <svg viewBox="0 0 24 24">
                <rect x="8" y="8" width="12" height="12" rx="1"/>
                <path d="M4 16V4a1 1 0 0 1 1-1h11"/>
            </svg>
            复制消息
        </div>
    </div>
    <div id="input-container">
        <div id="message-input" contenteditable="true" placeholder="输入消息..." role="textbox"></div>
        <button id="settings-button">
            <svg viewBox="0 0 24 24">
                <circle cx="12" cy="6" r="2"/>
                <circle cx="12" cy="12" r="2"/>
                <circle cx="12" cy="18" r="2"/>
            </svg>
        </button>
        <div id="settings-menu">
            <div class="menu-item" id="theme-toggle">
                <span>深色模式</span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="menu-item" id="clear-chat">
                <span>清空聊天记录</span>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M3 4H13" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M5 4V12H11V4" stroke="currentColor" stroke-width="1.5"/>
                </svg>
            </div>
            <div class="menu-item" id="quick-summary">
                <span>快速总结</span>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M2 4h12M2 8h8M2 12h4" stroke="currentColor" stroke-width="1.5"/>
                </svg>
            </div>
            <div class="menu-item" id="api-settings-toggle">
                <span>API 设置</span>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="menu-item" id="favorite-apis">
                <span>收藏的API</span>
                <div class="favorite-apis-list"></div>
            </div>
            <div class="menu-item">
                <span>侧栏宽度</span>
                <input type="range" id="sidebar-width" min="500" max="1500" step="10" value="800">
                <span id="width-value">800px</span>
            </div>
            <div class="menu-item">
                <span>字体大小</span>
                <input type="range" id="font-size" min="12" max="20" step="1" value="14">
                <span id="font-size-value">14px</span>
            </div>
            <div class="menu-item">
                <span>缩放比例</span>
                <input type="range" id="scale-factor" min="0.5" max="2" step="0.1" value="1">
                <span id="scale-value">1.0x</span>
            </div>
        </div>
    </div>
    <div id="api-settings">
        <div class="settings-header">
            <button class="back-button">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M12 4L6 10L12 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <span class="settings-title">API 设置</span>
        </div>
        <div class="api-cards">
            <!-- 卡片模板 -->
            <div class="api-card template" style="display: none;">
                <div class="api-card-header">
                    <div class="api-card-title"></div>
                    <div class="api-card-actions">
                        <button class="card-button favorite-btn" title="收藏">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M8 2L9.8 5.6L14 6.2L11 9.1L11.8 13.2L8 11.3L4.2 13.2L5 9.1L2 6.2L6.2 5.6L8 2Z" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </button>
                        <button class="card-button duplicate-btn" title="复制">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M13 5H7V11H13V5Z" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M10 3H4V9" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </button>
                        <button class="card-button delete-btn" title="删除">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M3 4H13" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M5 4V12H11V4" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="api-form">
                    <div class="form-group">
                        <div class="form-group-header">
                            <label>API Key</label>
                        </div>
                        <input type="password" class="api-key" placeholder="输入 API Key">
                    </div>
                    <div class="form-group">
                        <label>Base URL</label>
                        <input type="text" class="base-url" placeholder="输入 Base URL">
                    </div>
                    <div class="form-group">
                        <label>模型名称</label>
                        <input type="text" class="model-name" placeholder="输入模型名称">
                    </div>
                    <div class="form-group">
                        <div class="form-group-header">
                            <label>Temperature</label>
                            <span class="temperature-value">1.0</span>
                        </div>
                        <input type="range" class="temperature" min="0" max="2" step="0.1" value="1">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="image-preview-modal">
        <div class="image-preview-content">
            <img src="" alt="预览图片">
            <button class="image-preview-close">
                <svg viewBox="0 0 24 24" fill="none">
                    <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-linecap="round"/>
                </svg>
            </button>
        </div>
    </div>
    <script src="sidebar.js"></script>
    <script src="sidebar-message-handler.js"></script>
</body>
</html>